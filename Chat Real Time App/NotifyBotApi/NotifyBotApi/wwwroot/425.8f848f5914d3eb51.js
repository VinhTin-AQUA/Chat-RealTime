"use strict";(self.webpackChunkNotifyBotClient=self.webpackChunkNotifyBotClient||[]).push([[425],{7425:(Qt,O,l)=>{l.r(O),l.d(O,{AdminModule:()=>Jt});var m=l(6814),p=l(800),t=l(5879),g=l(2048);const w=function(){return{exact:!0}};let k=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-admin-nav"]],decls:11,vars:8,consts:[[1,"side-bar","w-full","h-screen"],[1,"menu","text-xl","h-auto"],["routerLinkActive","active","routerLink","/admin",1,"admin-menu-item",3,"routerLinkActiveOptions"],["routerLinkActive","active","routerLink","/admin/contacts-of-user",1,"admin-menu-item",3,"routerLinkActiveOptions"],["routerLinkActive","active","routerLink","/admin/options",1,"admin-menu-item",3,"routerLinkActiveOptions"],["routerLinkActive","active","routerLink","/admin/groups",1,"admin-menu-item",3,"routerLinkActiveOptions"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"ul")(3,"li",2),t._uU(4," Home "),t.qZA(),t.TgZ(5,"li",3),t._uU(6," Contacts "),t.qZA(),t.TgZ(7,"li",4),t._uU(8," Options "),t.qZA(),t.TgZ(9,"li",5),t._uU(10," Groups "),t.qZA()()()()),2&e&&(t.xp6(3),t.Q6J("routerLinkActiveOptions",t.DdM(4,w)),t.xp6(2),t.Q6J("routerLinkActiveOptions",t.DdM(5,w)),t.xp6(2),t.Q6J("routerLinkActiveOptions",t.DdM(6,w)),t.xp6(2),t.Q6J("routerLinkActiveOptions",t.DdM(7,w)))},dependencies:[p.rH,p.Od],styles:[".side-bar[_ngcontent-%COMP%]{box-shadow:1px 2px #ccc,-5px 0 5px #f4f4f4}.active[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(37 99 235 / var(--tw-bg-opacity));--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity))}.admin-menu-item[_ngcontent-%COMP%]{margin-top:.25rem;margin-bottom:.25rem;width:100%;cursor:pointer;border-radius:.125rem;padding:.5rem;text-align:center;transition-duration:75ms}.admin-menu-item[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(59 130 246 / var(--tw-bg-opacity));--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity))}"]}),i})(),F=(()=>{class i{constructor(e){this.adminService=e}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(g.l))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-admin-dashboard"]],decls:5,vars:0,consts:[[1,"h-auto","flex"],[1,"nav-bar","w-[80px]","min-w-[80px]","sm:min-w-[180px]","sm:w-[180px]"],[1,"content","w-full"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0)(1,"nav",1),t._UZ(2,"app-admin-nav"),t.qZA(),t.TgZ(3,"div",2),t._UZ(4,"router-outlet"),t.qZA()())},dependencies:[p.lC,k]}),i})();var b=l(1476),A=l(2495),h=l(3680),M=l(8645);l(6825);const E=new t.OlP("MAT_SORT_DEFAULT_OPTIONS"),P=(0,h.dB)((0,h.Id)(class{}));let C=(()=>{class i extends P{get direction(){return this._direction}set direction(e){this._direction=e}get disableClear(){return this._disableClear}set disableClear(e){this._disableClear=(0,A.Ig)(e)}constructor(e){super(),this._defaultOptions=e,this.sortables=new Map,this._stateChanges=new M.x,this.start="asc",this._direction="",this.sortChange=new t.vpe}register(e){this.sortables.set(e.id,e)}deregister(e){this.sortables.delete(e.id)}sort(e){this.active!=e.id?(this.active=e.id,this.direction=e.start?e.start:this.start):this.direction=this.getNextSortDirection(e),this.sortChange.emit({active:this.active,direction:this.direction})}getNextSortDirection(e){if(!e)return"";let a=function B(i,o){let e=["asc","desc"];return"desc"==i&&e.reverse(),o||e.push(""),e}(e.start||this.start,e?.disableClear??this.disableClear??!!this._defaultOptions?.disableClear),c=a.indexOf(this.direction)+1;return c>=a.length&&(c=0),a[c]}ngOnInit(){this._markInitialized()}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(E,8))},i.\u0275dir=t.lG2({type:i,selectors:[["","matSort",""]],hostAttrs:[1,"mat-sort"],inputs:{disabled:["matSortDisabled","disabled"],active:["matSortActive","active"],start:["matSortStart","start"],direction:["matSortDirection","direction"],disableClear:["matSortDisableClear","disableClear"]},outputs:{sortChange:"matSortChange"},exportAs:["matSort"],features:[t.qOj,t.TTD]}),i})(),U=(()=>{class i{constructor(){this.changes=new M.x}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Y={provide:U,deps:[[new t.FiY,new t.tp0,U]],useFactory:function R(i){return i||new U}};let H=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[Y],imports:[m.ez,h.BQ]}),i})();var N=l(3019),x=l(6070),d=l(5313),_=l(2296),S=l(617),T=l(2596),s=l(6223),Z=l(2032),v=l(5683);function J(i,o){1&i&&(t.TgZ(0,"th",20),t._uU(1,"No."),t.qZA())}function Q(i,o){if(1&i&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.Oqu(e.index)}}function G(i,o){1&i&&(t.TgZ(0,"th",20),t._uU(1,"Name"),t.qZA())}function L(i,o){if(1&i&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.hij(" ",e.firstName+" "+e.lastName," ")}}function j(i,o){1&i&&(t.TgZ(0,"th",20),t._uU(1,"Email"),t.qZA())}function $(i,o){if(1&i&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.Oqu(e.email)}}function z(i,o){1&i&&(t.TgZ(0,"th",20),t._uU(1,"DateCreated"),t.qZA())}function V(i,o){if(1&i&&(t.TgZ(0,"td",21),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,e.dateCreated))}}function X(i,o){1&i&&(t.TgZ(0,"th",20),t._uU(1,"Roles"),t.qZA())}function K(i,o){if(1&i&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.Oqu(e.roles)}}function W(i,o){1&i&&(t.TgZ(0,"th",20),t._uU(1,"Options"),t.qZA())}function tt(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"mat-icon",26),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,c=t.oxw();return t.KtG(c.unlockUser(a))}),t._uU(1,"lock"),t.qZA()}}function et(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"mat-icon",27),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,c=t.oxw();return t.KtG(c.lockUser(a))}),t._uU(1,"lock_open"),t.qZA()}}function it(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"td",21),t.YNc(1,tt,2,0,"mat-icon",22),t.YNc(2,et,2,0,"mat-icon",23),t.TgZ(3,"mat-icon",24),t.NdJ("click",function(){const c=t.CHM(e).$implicit,u=t.oxw();return t.KtG(u.deleteUser(c))}),t._uU(4,"delete"),t.qZA(),t.TgZ(5,"mat-icon",25),t.NdJ("click",function(){const c=t.CHM(e).$implicit,u=t.oxw();return t.KtG(u.editRole(c))}),t._uU(6,"edit"),t.qZA()()}if(2&i){const e=o.$implicit;t.xp6(1),t.Q6J("ngIf",!0===e.isLockout),t.xp6(1),t.Q6J("ngIf",!1===e.isLockout)}}function rt(i,o){1&i&&t._UZ(0,"tr",28)}function ot(i,o){1&i&&t._UZ(0,"tr",29)}let nt=(()=>{class i{constructor(e,r,a){this.adminService=e,this.sharedService=r,this.router=a,this.displayedColumns=["No.","Name","Email","DateCreated","Roles","Options"],this.data=[],this.length=0,this.pageSize=6,this.searchString=""}ngOnInit(){}ngAfterViewInit(){this.InitListUsers(),(0,N.T)(this.paginator.page).subscribe({next:e=>{this.searchString?this.getUserByname():this.adminService.getUsers(this.paginator.pageIndex,this.pageSize).subscribe({next:r=>{this.data=r.users},error:r=>{console.log(r)}})}})}InitListUsers(){this.adminService.getUsers(this.paginator.pageIndex,this.pageSize).subscribe({next:e=>{this.data=e.users,this.length=e.size},error:e=>{console.log(e)}})}getUserByname(){this.adminService.searchUserByName(this.searchString,this.paginator.pageIndex,this.pageSize).subscribe({next:e=>{this.data=e.users,this.length=e.size},error:e=>{console.log(e)}})}deleteUser(e){this.adminService.deleteUser(e.id).subscribe({next:r=>{this.sharedService.showDialog(!0,r.value.title,r.value.message),this.InitListUsers(),this.length--},error:r=>{console.log(r)}})}searchName(){this.paginator.pageIndex=0,""===this.searchString?this.InitListUsers():this.getUserByname()}lockUser(e){this.adminService.lockUser(e.id).subscribe({next:r=>{e.isLockout=!e.isLockout},error:r=>{this.sharedService.showDialog(!1,"Error",r.error)}})}unlockUser(e){this.adminService.unlockUser(e.id).subscribe({next:r=>{e.isLockout=!e.isLockout},error:r=>{this.sharedService.showDialog(!1,"Error",r.error)}})}editRole(e){this.router.navigateByUrl(`/admin/edit-role/${e.id}?name=${e.firstName+" "+e.lastName}`)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(g.l),t.Y36(x.F),t.Y36(p.F0))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-users"]],viewQuery:function(e,r){if(1&e&&(t.Gf(b.NW,5),t.Gf(C,5)),2&e){let a;t.iGM(a=t.CRH())&&(r.paginator=a.first),t.iGM(a=t.CRH())&&(r.sort=a.first)}},decls:35,vars:6,consts:[[1,"mt-4","ml-4","flex","items-center","justify-between","gap-2"],["color","primary","routerLink","/admin/add-user","mat-raised-button",""],[1,"example-container","flex","gap-2"],["mat-fab","","color","primary","aria-label","Example icon button with a home icon",3,"click"],[1,"w-[300px]"],["matInput","","placeholder","Name",3,"ngModel","ngModelChange"],[1,"example-container","mat-elevation-z8"],[1,"example-table-container"],["mat-table","","matSort","","matSortActive","created","matSortDisableClear","","matSortDirection","asc",1,"example-table",3,"dataSource"],["matColumnDef","No."],["class","font-bold","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Name"],["matColumnDef","Email"],["matColumnDef","DateCreated"],["matColumnDef","Roles"],["matColumnDef","Options"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","",3,"length","pageSize"],["mat-header-cell","",1,"font-bold"],["mat-cell",""],["mat-raised-button","","matTooltip","unlock user","matTooltipPosition","before","class","option-button text-orange-600",3,"click",4,"ngIf"],["mat-raised-button","","matTooltip","lock user","matTooltipPosition","above","class","option-button text-green-600",3,"click",4,"ngIf"],["mat-raised-button","","matTooltip","delete user","matTooltipPosition","above",1,"option-button","text-red-600",3,"click"],["mat-raised-button","","matTooltip","edit role","matTooltipPosition","above",1,"option-button","text-green-600",3,"click"],["mat-raised-button","","matTooltip","unlock user","matTooltipPosition","before",1,"option-button","text-orange-600",3,"click"],["mat-raised-button","","matTooltip","lock user","matTooltipPosition","above",1,"option-button","text-green-600",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,r){1&e&&(t.TgZ(0,"div",0)(1,"button",1),t._uU(2," Add User "),t.qZA(),t.TgZ(3,"div",2)(4,"button",3),t.NdJ("click",function(){return r.searchName()}),t.TgZ(5,"mat-icon"),t._uU(6,"search"),t.qZA()(),t.TgZ(7,"mat-form-field",4)(8,"mat-label"),t._uU(9,"Search"),t.qZA(),t.TgZ(10,"input",5),t.NdJ("ngModelChange",function(c){return r.searchString=c}),t.qZA()()()(),t.TgZ(11,"div",6)(12,"div",7)(13,"table",8),t.ynx(14,9),t.YNc(15,J,2,0,"th",10),t.YNc(16,Q,2,1,"td",11),t.BQk(),t.ynx(17,12),t.YNc(18,G,2,0,"th",10),t.YNc(19,L,2,1,"td",11),t.BQk(),t.ynx(20,13),t.YNc(21,j,2,0,"th",10),t.YNc(22,$,2,1,"td",11),t.BQk(),t.ynx(23,14),t.YNc(24,z,2,0,"th",10),t.YNc(25,V,3,3,"td",11),t.BQk(),t.ynx(26,15),t.YNc(27,X,2,0,"th",10),t.YNc(28,K,2,1,"td",11),t.BQk(),t.ynx(29,16),t.YNc(30,W,2,0,"th",10),t.YNc(31,it,7,2,"td",11),t.BQk(),t.YNc(32,rt,1,0,"tr",17),t.YNc(33,ot,1,0,"tr",18),t.qZA()(),t._UZ(34,"mat-paginator",19),t.qZA()),2&e&&(t.xp6(10),t.Q6J("ngModel",r.searchString),t.xp6(3),t.Q6J("dataSource",r.data),t.xp6(19),t.Q6J("matHeaderRowDef",r.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",r.displayedColumns),t.xp6(1),t.Q6J("length",r.length)("pageSize",r.pageSize))},dependencies:[m.O5,p.rH,b.NW,d.BZ,d.fO,d.as,d.w1,d.Dz,d.nj,d.ge,d.ev,d.XQ,d.Gk,C,_.lW,_.cs,S.Hw,T.gM,s.Fj,s.JJ,Z.Nt,v.KE,v.hX,s.On,m.uU],styles:[".example-container[_ngcontent-%COMP%]{position:relative;margin-top:1rem;margin-left:1rem}.example-table-container[_ngcontent-%COMP%]{position:relative;overflow:auto;min-height:400px;width:300px}@media (min-width: 640px){.example-table-container[_ngcontent-%COMP%]{min-width:100px}}@media (min-width: 768px){.example-table-container[_ngcontent-%COMP%]{min-width:650px}}@media (min-width: 1024px){.example-table-container[_ngcontent-%COMP%]{min-width:1000px}}@media (min-width: 1280px){.example-table-container[_ngcontent-%COMP%]{min-width:1200px}}table[_ngcontent-%COMP%]{width:100%}.option-button[_ngcontent-%COMP%]{cursor:pointer}"]}),i})();function at(i,o){1&i&&(t.TgZ(0,"span",15)(1,"b"),t._uU(2,"First Name"),t.qZA(),t._uU(3," must be required "),t.qZA())}function st(i,o){1&i&&(t.TgZ(0,"span",15)(1,"b"),t._uU(2,"Last Name"),t.qZA(),t._uU(3," must be required "),t.qZA())}function ct(i,o){1&i&&(t.TgZ(0,"span",15)(1,"b"),t._uU(2,"Email"),t.qZA(),t._uU(3," must be required "),t.qZA())}function lt(i,o){1&i&&(t.TgZ(0,"span",15)(1,"b"),t._uU(2,"Email"),t.qZA(),t._uU(3," is invalid "),t.qZA())}function dt(i,o){1&i&&(t.TgZ(0,"span",15)(1,"b"),t._uU(2,"Password"),t.qZA(),t._uU(3," must be required "),t.qZA())}function mt(i,o){1&i&&(t.TgZ(0,"span",15)(1,"b"),t._uU(2,"Password"),t.qZA(),t._uU(3," must be at least 6 and max length is 16 characters "),t.qZA())}function pt(i,o){if(1&i&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.Oqu(e)}}function ut(i,o){if(1&i&&(t.TgZ(0,"div",16)(1,"ul"),t.YNc(2,pt,2,1,"li",17),t.qZA()()),2&i){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.errorMessages)}}let ht=(()=>{class i{constructor(e,r,a,c){this.formBuilder=e,this.router=r,this.adminService=a,this.sharedService=c,this.submitted=!1,this.errorMessages=[],this.addUserForm=new s.cw({})}ngOnInit(){this.addUserForm=this.formBuilder.group({firstName:["",[s.kI.required]],lastName:["",[s.kI.required]],email:["",[s.kI.email,s.kI.required]],password:["",[s.kI.required,s.kI.maxLength(16),s.kI.minLength(6)]]})}addNewUser(){this.submitted=!0,this.errorMessages=[],this.addUserForm.valid&&this.adminService.addNewUser(this.addUserForm.value).subscribe({next:e=>{this.router.navigateByUrl("/admin"),this.sharedService.showDialog(!0,e.value.title,e.value.message)},error:e=>{e.value?this.sharedService.showDialog(!1,e.value.title,e.value.message):e.error.errors?this.errorMessages=e.error.errors:this.errorMessages.push(e.error)}})}validateInputContainer(e){if(!0===this.submitted)if("firstName"===e){if(this.addUserForm.hasError("required",e))return"input-container-error"}else if("lastName"===e){if(this.addUserForm.hasError("required",e))return"input-container-error"}else if("email"===e){if(this.addUserForm.hasError("email",e)||this.addUserForm.hasError("required",e))return"input-container-error"}else if("password"===e){if(this.addUserForm.hasError("maxlength",e)||this.addUserForm.hasError("minlength",e)||this.addUserForm.hasError("required",e))return"input-container-error"}else if("reEnterPassword"===e&&this.addUserForm.hasError("required",e))return"input-container-error";return"input-container"}validateInputField(e){if(!0===this.submitted)if("firstName"===e){if(this.addUserForm.hasError("required",e))return"input-icon-error"}else if("lastName"===e){if(this.addUserForm.hasError("required",e))return"input-icon-error"}else if("email"===e){if(this.addUserForm.hasError("email",e)||this.addUserForm.hasError("required",e))return"input-icon-error"}else if("password"===e){if(this.addUserForm.hasError("maxlength",e)||this.addUserForm.hasError("minlength",e)||this.addUserForm.hasError("required",e))return"input-icon-error"}else if("reEnterPassword"===e&&this.addUserForm.hasError("required",e))return"input-icon-error";return"input-icon"}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(s.qu),t.Y36(p.F0),t.Y36(g.l),t.Y36(x.F))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-add-user"]],decls:33,vars:24,consts:[[1,"relative","w-full"],[1,"mt-10","flex","flex-col","items-center"],[1,"text-center","border-b-2","pb-1","border-b-black","w-[40%]","mb-[40px]"],[1,"w-full","h-full"],[1,"w-[50%]"],["autocomplete","off",1,"flex","items-center","flex-col",3,"formGroup","ngSubmit"],["spellcheck","false","formControlName","firstName","type","text","placeholder","First Name",1,"input-field"],["class","text-red-500 mb-3",4,"ngIf"],["spellcheck","false","formControlName","lastName","type","text","placeholder","Last Name",1,"input-field"],[1,"input-icon"],["formControlName","email","type","text","placeholder","Email",1,"input-field"],["type","text","formControlName","password","placeholder","Password",1,"input-field"],["class","errors-container",4,"ngIf"],[1,"flex","items-center","justify-center","w-full","h-[40px]"],["type","submit",1,"w-[50%]","bg-blue-500","p-2","rounded-full","text-xl","text-white","hover:bg-blue-700","duration-75"],[1,"text-red-500","mb-3"],[1,"errors-container"],[4,"ngFor","ngForOf"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),t._uU(4,"Add new user"),t.qZA()(),t.TgZ(5,"div",4)(6,"form",5),t.NdJ("ngSubmit",function(){return r.addNewUser()}),t.TgZ(7,"div")(8,"mat-icon"),t._uU(9,"account_circle"),t.qZA(),t._UZ(10,"input",6),t.qZA(),t.YNc(11,at,4,0,"span",7),t.TgZ(12,"div")(13,"mat-icon"),t._uU(14,"account_circle"),t.qZA(),t._UZ(15,"input",8),t.qZA(),t.YNc(16,st,4,0,"span",7),t.TgZ(17,"div")(18,"mat-icon",9),t._uU(19," email"),t.qZA(),t._UZ(20,"input",10),t.qZA(),t.YNc(21,ct,4,0,"span",7),t.YNc(22,lt,4,0,"span",7),t.TgZ(23,"div")(24,"mat-icon",9),t._uU(25,"lock"),t.qZA(),t._UZ(26,"input",11),t.qZA(),t.YNc(27,dt,4,0,"span",7),t.YNc(28,mt,4,0,"span",7),t.YNc(29,ut,3,1,"div",12),t.TgZ(30,"div",13)(31,"button",14),t._uU(32," Add "),t.qZA()()()()()()),2&e&&(t.xp6(6),t.Q6J("formGroup",r.addUserForm),t.xp6(1),t.Tol(r.validateInputContainer("firstName")),t.xp6(1),t.Tol(r.validateInputField("firstName")),t.xp6(3),t.Q6J("ngIf",!0===r.submitted&&r.addUserForm.hasError("required","firstName")),t.xp6(1),t.Tol(r.validateInputContainer("lastName")),t.xp6(1),t.Tol(r.validateInputField("lastName")),t.xp6(3),t.Q6J("ngIf",!0===r.submitted&&r.addUserForm.hasError("required","lastName")),t.xp6(1),t.Tol(r.validateInputContainer("email")),t.xp6(1),t.Tol(r.validateInputField("email")),t.xp6(3),t.Q6J("ngIf",!0===r.submitted&&r.addUserForm.hasError("required","email")),t.xp6(1),t.Q6J("ngIf",!0===r.submitted&&r.addUserForm.hasError("email","email")),t.xp6(1),t.Tol(r.validateInputContainer("password")),t.xp6(1),t.Tol(r.validateInputField("password")),t.xp6(3),t.Q6J("ngIf",!0===r.submitted&&r.addUserForm.hasError("required","password")),t.xp6(1),t.Q6J("ngIf",!0===r.submitted&&(r.addUserForm.hasError("minlength","password")||r.addUserForm.hasError("maxlength","password"))),t.xp6(1),t.Q6J("ngIf",r.errorMessages.length>0))},dependencies:[m.sg,m.O5,S.Hw,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u],styles:[".input-container[_ngcontent-%COMP%]{margin-bottom:.75rem;display:flex;height:50px;width:100%;align-items:center;justify-content:space-between;border-radius:9999px;border-width:2px;--tw-border-opacity: 1;border-color:rgb(99 102 241 / var(--tw-border-opacity))}@media (min-width: 640px){.input-container[_ngcontent-%COMP%]{width:100%}}.input-container-error[_ngcontent-%COMP%]{margin-bottom:.25rem;display:flex;height:50px;width:100%;align-items:center;justify-content:space-between;border-radius:9999px;border-width:2px;--tw-border-opacity: 1;border-color:rgb(239 68 68 / var(--tw-border-opacity))}@media (min-width: 640px){.input-container-error[_ngcontent-%COMP%]{width:70%}}.input-field[_ngcontent-%COMP%]{margin-right:1rem;width:70%;padding-top:.5rem;padding-bottom:.5rem;padding-left:1rem;font-size:1.2em;outline:2px solid transparent;outline-offset:2px}@media (min-width: 640px){.input-field[_ngcontent-%COMP%]{margin-right:.75rem;width:85%}}.input-icon[_ngcontent-%COMP%]{margin-left:.5rem;height:1.75rem;width:1.75rem;font-size:30px;--tw-text-opacity: 1;color:rgb(99 102 241 / var(--tw-text-opacity))}@media (min-width: 640px){.input-icon[_ngcontent-%COMP%]{height:2.5rem;width:2.5rem;font-size:40px}}.input-icon-error[_ngcontent-%COMP%]{margin-left:.5rem;height:1.75rem;width:1.75rem;font-size:30px;--tw-text-opacity: 1;color:rgb(239 68 68 / var(--tw-text-opacity))}@media (min-width: 640px){.input-icon-error[_ngcontent-%COMP%]{height:2.5rem;width:2.5rem;font-size:40px}}.errors-container[_ngcontent-%COMP%]{margin-bottom:1rem;--tw-text-opacity: 1;color:rgb(239 68 68 / var(--tw-text-opacity))}"]}),i})(),I=(()=>{class i{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(e){this._vertical=(0,A.Ig)(e)}get inset(){return this._inset}set inset(e){this._inset=(0,A.Ig)(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(e,r){2&e&&(t.uIk("aria-orientation",r.vertical?"vertical":"horizontal"),t.ekj("mat-divider-vertical",r.vertical)("mat-divider-horizontal",!r.vertical)("mat-divider-inset",r.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(e,r){},styles:[".mat-divider{--mat-divider-width:1px;display:block;margin:0;border-top-style:solid;border-top-color:var(--mat-divider-color);border-top-width:var(--mat-divider-width)}.mat-divider.mat-divider-vertical{border-top:0;border-right-style:solid;border-right-color:var(--mat-divider-color);border-right-width:var(--mat-divider-width)}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],encapsulation:2,changeDetection:0}),i})(),ft=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[h.BQ,h.BQ]}),i})();function gt(i,o){1&i&&(t.TgZ(0,"span",15)(1,"b"),t._uU(2,"Password"),t.qZA(),t._uU(3," must be required "),t.qZA())}function _t(i,o){1&i&&(t.TgZ(0,"span",15)(1,"b"),t._uU(2,"Password"),t.qZA(),t._uU(3," must be at least 6 and max length is 16 characters "),t.qZA())}function vt(i,o){if(1&i&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.Oqu(e)}}function bt(i,o){if(1&i&&(t.TgZ(0,"div",16)(1,"ul"),t.YNc(2,vt,2,1,"li",17),t.qZA()()),2&i){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.errorMessages)}}let xt=(()=>{class i{constructor(e,r,a){this.adminService=e,this.sharedService=r,this.formBuilder=a,this.formGroup=new s.cw({}),this.submitted=!1,this.errorMessages=[]}ngOnInit(){this.initializeForm()}initializeForm(){this.formGroup=this.formBuilder.group({numberOfUsers:[5,[s.kI.min(1)]],password:["abc123",[s.kI.required,s.kI.maxLength(16),s.kI.minLength(6)]]})}deleteAllusers(){this.adminService.deleteAllUsers().subscribe({next:e=>{this.sharedService.showDialog(!0,"Delete all users successfully","Now only you can access application.")},error:e=>{this.sharedService.showDialog(!1,"Error","Something error when deleting all users.")}})}seedUsers(){this.submitted=!0,this.errorMessages=[],this.formGroup.valid&&this.adminService.seedUsers(this.formGroup.get("numberOfUsers")?.value,this.formGroup.get("password")?.value).subscribe({next:e=>{this.sharedService.showDialog(!0,"Seed users successfully",`Increase ${this.formGroup.get("numberOfUsers")?.value} users.`)},error:e=>{e.value?this.sharedService.showDialog(!1,e.value.title,e.value.message):e.error.errors?this.errorMessages=e.error.errors:this.errorMessages.push(e.error)}})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(g.l),t.Y36(x.F),t.Y36(s.qu))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-options"]],decls:27,vars:4,consts:[[1,"mt-2","ml-2","flex","gap-2","w-full"],[1,"content1","w-1/2"],[1,"mb-4"],[1,"text-center","text-red-500"],["mat-raised-button","","color","warn",1,"w-full",3,"click"],[1,"flex","flex-col"],[1,"text-center","text-blue-500"],["autocomplete","off",1,"flex","items-center","flex-col",3,"formGroup","ngSubmit"],[1,"example-full-width"],["formControlName","numberOfUsers","matInput","","placeholder","5","type","number"],["formControlName","password","matInput","","placeholder","abc123","type","text"],["class","text-red-500 mb-3",4,"ngIf"],["class","errors-container",4,"ngIf"],["type","submit","mat-raised-button","","color","primary"],[1,"content2","w-1/2","bg-red-500"],[1,"text-red-500","mb-3"],[1,"errors-container"],[4,"ngFor","ngForOf"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),t._uU(4,"Delete all users"),t.qZA(),t.TgZ(5,"button",4),t.NdJ("click",function(){return r.deleteAllusers()}),t._uU(6," Delete All User "),t.qZA()(),t._UZ(7,"mat-divider"),t.TgZ(8,"div",5)(9,"h1",6),t._uU(10,"Seed users"),t.qZA(),t.TgZ(11,"form",7),t.NdJ("ngSubmit",function(){return r.seedUsers()}),t.TgZ(12,"mat-form-field",8)(13,"mat-label"),t._uU(14,"Number of users"),t.qZA(),t._UZ(15,"input",9),t.qZA(),t.TgZ(16,"mat-form-field",8)(17,"mat-label"),t._uU(18,"Password"),t.qZA(),t._UZ(19,"input",10),t.qZA(),t.YNc(20,gt,4,0,"span",11),t.YNc(21,_t,4,0,"span",11),t.YNc(22,bt,3,1,"div",12),t.TgZ(23,"button",13),t._uU(24," Seed User "),t.qZA()()(),t._UZ(25,"mat-divider"),t.qZA(),t._UZ(26,"div",14),t.qZA()),2&e&&(t.xp6(11),t.Q6J("formGroup",r.formGroup),t.xp6(9),t.Q6J("ngIf",!0===r.submitted&&r.formGroup.hasError("required","password")),t.xp6(1),t.Q6J("ngIf",!0===r.submitted&&(r.formGroup.hasError("minlength","password")||r.formGroup.hasError("maxlength","password"))),t.xp6(1),t.Q6J("ngIf",r.errorMessages.length>0))},dependencies:[m.sg,m.O5,_.lW,s._Y,s.Fj,s.wV,s.JJ,s.JL,s.sg,s.u,Z.Nt,v.KE,v.hX,I]}),i})();var D=l(8525);function wt(i,o){if(1&i&&(t.TgZ(0,"span",7),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.AsE(" (+",((null==e.roles.value?null:e.roles.value.length)||0)-1," ",2===(null==e.roles.value?null:e.roles.value.length)?"other":"others",") ")}}function Ct(i,o){if(1&i&&(t.TgZ(0,"mat-option",8),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function St(i,o){if(1&i&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.hij(" ",e," ")}}function At(i,o){if(1&i&&(t.TgZ(0,"ul"),t.YNc(1,St,2,1,"li",9),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",null==e.roles?null:e.roles.value)}}let Ut=(()=>{class i{constructor(e,r,a){this.activatedRoute=e,this.adminService=r,this.sharedService=a,this.userId="",this.name="",this.applicationRoles=[],this.roles=new s.NI([""])}ngOnInit(){this.userId=this.activatedRoute.snapshot.paramMap.get("userId"),this.name=this.activatedRoute.snapshot.queryParamMap.get("name"),this.adminService.getApplicationRoles().subscribe({next:e=>{this.applicationRoles=e},error:e=>{this.sharedService.showDialog(!1,"Error","Something error when get application roles")}})}save(){0===this.roles.value?.length&&this.roles.value.push(""),this.adminService.setRolesUser(this.userId,this.roles?.value).subscribe({next:e=>{this.sharedService.showDialog(!0,e.value.title,e.value.message)},error:e=>{this.sharedService.showDialog(!1,"Error",e.error)}})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(p.gz),t.Y36(g.l),t.Y36(x.F))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-edit-role"]],decls:16,vars:5,consts:[[1,"mt-2","ml-2"],[1,"flex","items-center","gap-2"],["mat-raised-button","","color","primary",3,"click"],["multiple","",3,"formControl"],["class","example-additional-selection",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"example-additional-selection"],[3,"value"],[4,"ngFor","ngForOf"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0)(1,"h1"),t._uU(2,"Choose roles for"),t.qZA(),t.TgZ(3,"div",1)(4,"button",2),t.NdJ("click",function(){return r.save()}),t._uU(5,"Primary"),t.qZA(),t.TgZ(6,"mat-form-field")(7,"mat-label"),t._uU(8,"User roles"),t.qZA(),t.TgZ(9,"mat-select",3)(10,"mat-select-trigger"),t._uU(11),t.YNc(12,wt,2,2,"span",4),t.qZA(),t.YNc(13,Ct,2,2,"mat-option",5),t.qZA()()(),t.TgZ(14,"div"),t.YNc(15,At,2,1,"ul",6),t.qZA()()),2&e&&(t.xp6(9),t.Q6J("formControl",r.roles),t.xp6(2),t.hij(" ",(null==r.roles.value?null:r.roles.value[0])||""," "),t.xp6(1),t.Q6J("ngIf",((null==r.roles.value?null:r.roles.value.length)||0)>1),t.xp6(1),t.Q6J("ngForOf",r.applicationRoles),t.xp6(2),t.Q6J("ngIf",r.roles))},dependencies:[m.sg,m.O5,_.lW,s.JJ,s.oH,v.KE,v.hX,D.gD,D.$L,h.ey]}),i})();function Tt(i,o){1&i&&(t.TgZ(0,"th",14),t._uU(1,"Email"),t.qZA())}function Zt(i,o){if(1&i&&(t.TgZ(0,"td",15),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.Oqu(e.email)}}function Dt(i,o){1&i&&(t.TgZ(0,"th",14),t._uU(1,"DateCreated"),t.qZA())}function yt(i,o){if(1&i&&(t.TgZ(0,"td",15),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.dateCreated)," ")}}function Ot(i,o){1&i&&(t.TgZ(0,"th",14),t._uU(1,"Title"),t.qZA())}function Mt(i,o){if(1&i&&(t.TgZ(0,"td",15),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.Oqu(e.title)}}function Nt(i,o){1&i&&(t.TgZ(0,"th",14),t._uU(1,"Options"),t.qZA())}function It(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"td",15)(1,"mat-icon",16),t.NdJ("click",function(){const c=t.CHM(e).$implicit,u=t.oxw();return t.KtG(u.deleteContact(c))}),t._uU(2,"delete"),t.qZA(),t.TgZ(3,"mat-icon",17),t.NdJ("click",function(){const c=t.CHM(e).$implicit,u=t.oxw();return t.KtG(u.showDescription(c.description))}),t._uU(4,"remove_red_eye"),t.qZA()()}}function qt(i,o){1&i&&t._UZ(0,"tr",18)}function kt(i,o){1&i&&t._UZ(0,"tr",19)}let Ft=(()=>{class i{constructor(e,r,a){this.adminService=e,this.sharedService=r,this.router=a,this.displayedColumns=["Email","DateCreated","Title","Options"],this.data=[],this.length=0,this.pageSize=6,this.searchString=""}ngOnInit(){}ngAfterViewInit(){this.InitListContacts(),(0,N.T)(this.paginator.page).subscribe({next:e=>{this.adminService.getContacts(this.paginator.pageIndex,this.pageSize).subscribe({next:r=>{this.data=r.value.contacts},error:r=>{console.log(r)}})}})}InitListContacts(){this.adminService.getContacts(this.paginator.pageIndex,this.pageSize).subscribe({next:e=>{this.data=e.value.contacts,this.length=e.value.size},error:e=>{console.log(e)}})}deleteContact(e){this.adminService.deleteContact(e.id).subscribe({next:r=>{this.sharedService.showDialog(!0,"Delete contact successfully","Delete contact successfully"),this.updateListContact(e)},error:r=>{this.sharedService.showDialog(!1,"Error","Something error when delete contact")}})}deleteAllContacts(){this.adminService.deleteAllContacts().subscribe({next:e=>{this.sharedService.showDialog(!0,"Delete all contact successfully","Delete all contact successfully"),this.data=[]},error:e=>{this.sharedService.showDialog(!1,"Error","Something error when delete contact")}})}updateListContact(e){const r=this.data.find(a=>a.id===e.id);if(void 0!==r){let a=this.data.filter(c=>c.id!==r.id);this.data=a,this.length--}}showDescription(e){this.sharedService.showText(e)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(g.l),t.Y36(x.F),t.Y36(p.F0))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-contact-of-user"]],viewQuery:function(e,r){if(1&e&&(t.Gf(b.NW,5),t.Gf(C,5)),2&e){let a;t.iGM(a=t.CRH())&&(r.paginator=a.first),t.iGM(a=t.CRH())&&(r.sort=a.first)}},decls:21,vars:5,consts:[[1,"mt-4","ml-4","flex","items-center","justify-between","gap-2"],["color","warn","mat-raised-button","",3,"click"],[1,"example-container","mat-elevation-z8"],[1,"example-table-container"],["mat-table","","matSort","","matSortActive","created","matSortDisableClear","","matSortDirection","asc",1,"example-table",3,"dataSource"],["matColumnDef","Email"],["class","font-bold","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","DateCreated"],["matColumnDef","Title"],["matColumnDef","Options"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","",3,"length","pageSize"],["mat-header-cell","",1,"font-bold"],["mat-cell",""],["mat-raised-button","","matTooltip","delete contact","matTooltipPosition","above",1,"option-button","text-red-600",3,"click"],["mat-raised-button","","matTooltip","detail","matTooltipPosition","above",1,"option-button","text-green-600",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,r){1&e&&(t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(){return r.deleteAllContacts()}),t._uU(2," Delete all contacts "),t.qZA()(),t.TgZ(3,"div",2)(4,"div",3)(5,"table",4),t.ynx(6,5),t.YNc(7,Tt,2,0,"th",6),t.YNc(8,Zt,2,1,"td",7),t.BQk(),t.ynx(9,8),t.YNc(10,Dt,2,0,"th",6),t.YNc(11,yt,3,3,"td",7),t.BQk(),t.ynx(12,9),t.YNc(13,Ot,2,0,"th",6),t.YNc(14,Mt,2,1,"td",7),t.BQk(),t.ynx(15,10),t.YNc(16,Nt,2,0,"th",6),t.YNc(17,It,5,0,"td",7),t.BQk(),t.YNc(18,qt,1,0,"tr",11),t.YNc(19,kt,1,0,"tr",12),t.qZA()(),t._UZ(20,"mat-paginator",13),t.qZA()),2&e&&(t.xp6(5),t.Q6J("dataSource",r.data),t.xp6(13),t.Q6J("matHeaderRowDef",r.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",r.displayedColumns),t.xp6(1),t.Q6J("length",r.length)("pageSize",r.pageSize))},dependencies:[b.NW,d.BZ,d.fO,d.as,d.w1,d.Dz,d.nj,d.ge,d.ev,d.XQ,d.Gk,C,_.lW,S.Hw,T.gM,m.uU],styles:[".example-container[_ngcontent-%COMP%]{position:relative;margin-top:1rem;margin-left:1rem}.example-table-container[_ngcontent-%COMP%]{position:relative;overflow:auto;min-height:400px;width:300px}@media (min-width: 640px){.example-table-container[_ngcontent-%COMP%]{min-width:100px}}@media (min-width: 768px){.example-table-container[_ngcontent-%COMP%]{min-width:650px}}@media (min-width: 1024px){.example-table-container[_ngcontent-%COMP%]{min-width:1000px}}@media (min-width: 1280px){.example-table-container[_ngcontent-%COMP%]{min-width:1200px}}table[_ngcontent-%COMP%]{width:100%}.option-button[_ngcontent-%COMP%]{cursor:pointer}"]}),i})();var y=l(5861),q=l(708),Et=l(1893);function Pt(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",8)(1,"div",9),t.NdJ("click",function(){const c=t.CHM(e).$implicit,u=t.oxw();return t.KtG(u.getOnlinesAndMembers(c))}),t.TgZ(2,"div",10)(3,"span",11),t._uU(4),t.qZA(),t.TgZ(5,"span"),t._uU(6),t.qZA()(),t.TgZ(7,"span",12),t._uU(8),t.qZA(),t._UZ(9,"mat-divider"),t.qZA()()}if(2&i){const e=o.$implicit;t.xp6(4),t.hij("",e.name," - "),t.xp6(2),t.hij("Members: ",e.memebers,""),t.xp6(2),t.hij("Onlines: ",e.onlines,"")}}function Bt(i,o){if(1&i&&(t.TgZ(0,"tr")(1,"th"),t._uU(2),t.qZA(),t.TgZ(3,"th"),t._uU(4),t.qZA()()),2&i){const e=o.$implicit,r=o.index,a=t.oxw();t.xp6(2),t.Oqu(e),t.xp6(2),t.Oqu(a.onlines[r])}}const Rt=[{path:"",component:F,children:[{path:"",component:nt,title:"Admin dashboard"},{path:"add-user",component:ht,title:"Add user"},{path:"options",component:xt,title:"Options"},{path:"edit-role/:userId",component:Ut,title:"Edit role"},{path:"contacts-of-user",component:Ft,title:"Contacts of user"},{path:"groups",component:(()=>{class i{constructor(e){this.groupService=e,this.groups=[],this.members=[],this.onlines=[]}ngOnInit(){this.getAllGroups()}getAllGroups(){this.groupService.getAllGroup().subscribe({next:e=>{this.groups=e},error:e=>{console.log(e)}})}getMembersOfGroup(e){var r=this;return(0,y.Z)(function*(){return yield(0,q.n)(r.groupService.getUsersOFGroup(e.id)).then(c=>{r.members=c}).catch(c=>{console.log(c)})})()}getOnlinesOfGroup(e){var r=this;return(0,y.Z)(function*(){return yield(0,q.n)(r.groupService.getUsersOnline(e.name)).then(c=>{r.onlines=c}).catch(c=>{console.log(c)})})()}getOnlinesAndMembers(e){var r=this;return(0,y.Z)(function*(){yield r.getMembersOfGroup(e),yield r.getOnlinesOfGroup(e)})()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Et.l))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-groups"]],decls:13,vars:2,consts:[[1,"mt-2","ml-2","flex","gap-2","w-full"],[1,"content1","w-1/2"],["class","my-2 p-1 hover:bg-blue-200 duration-75",4,"ngFor","ngForOf"],[1,"content2","w-1/2"],[1,"w-full"],[1,"bg-red-400","text-white"],[1,"bg-green-300"],[4,"ngFor","ngForOf"],[1,"my-2","p-1","hover:bg-blue-200","duration-75"],[3,"click"],[1,"text-[1.5em]"],[1,"font-bold"],[1,"text-green-700","font-bold"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,Pt,10,3,"div",2),t.qZA(),t.TgZ(3,"div",3)(4,"table",4)(5,"thead")(6,"tr")(7,"th",5),t._uU(8,"Memebers"),t.qZA(),t.TgZ(9,"th",6),t._uU(10,"Onlines"),t.qZA()()(),t.TgZ(11,"tbody"),t.YNc(12,Bt,5,2,"tr",7),t.qZA()()()()),2&e&&(t.xp6(2),t.Q6J("ngForOf",r.groups),t.xp6(10),t.Q6J("ngForOf",r.members))},dependencies:[m.sg,I]}),i})(),title:"Groups"}]}];let Yt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[p.Bz.forChild(Rt),p.Bz]}),i})();var Ht=l(6208);let Jt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[m.ez,Yt,b.TU,d.p0,H,_.ot,S.Ps,T.AV,s.UX,Z.c,s.u5,ft,D.LD,Ht.m]}),i})()}}]);